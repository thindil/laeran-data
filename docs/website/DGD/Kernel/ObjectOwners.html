<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />

  <title>The Phantasmal MUDlib for DGD: Object Creators and Owners
</title>
  <link href="../../css/default.css" type="text/css" rel="stylesheet" />
</head>

<body>
  <div class="header_pane">
    <p>Phantasmal MUD Lib for DGD</p>

  </div>

  <div class="banner_pane">
    <table class="banner">
  <tr>
    <td class="banner" align="center"><a href=
    "http://validator.w3.org/check/referer"><img src=
    "http://www.w3.org/Icons/valid-xhtml10" alt=
    "Valid XHTML 1.0 Strict!" style=
    "border: 0; width: 88px; height: 31px;"></a> <a href=
    "http://jigsaw.w3.org/css-validator/check/referer"><img src=
    "http://jigsaw.w3.org/css-validator/images/vcss" alt=
    "Valid CSS!" style="border: 0; width: 88px; height: 31px;"></a>
    <a href="http://sourceforge.net"><img src=
    "http://sourceforge.net/sflogo.php?group_id=48659&amp;type=2"
    style="border: 0; width: 125px; height: 37px;" alt=
    "SourceForge.net Logo"></a></td>
  </tr>
</table>

  </div>

  <table>
    <tr>
      <td valign="top" class="index_pane">
        <ul>
<li><a href="../../index.html">Phantasmal Site</a></li>
<ul>
<li><a href="../../History.html">History</a></li>
<li><a href="../../Installing.html">Installing Baseline Phantasmal</a></li>
<li><a href="../../Comparison.html">Comparison to Other Libs</a></li>
<li><a href="../../Credits.html">Credits</a></li>
<li><a href="../../Current.html">Current Features</a></li>
<li><a href="../../WhatIsPhantasmal.html">About</a></li>
<li><a href="../../API/index.html">Phantasmal API</a></li>
<li><a href="../../Archive/index.html">Archive</a></li>
<li><a href="../../Design/index.html">Design</a></li>
<li><a href="../../Development/index.html">Development</a></li>
<li><a href="../index.html">DGD</a></li>
<ul>
<li><a href="../Manual/index.html">DGD Reference Manual</a></li>
<li><a href="../Contribute.html">Contributing to DGD</a></li>
<li><a href="../CSharp_vs_DGD.html">CSharp vs DGD</a></li>
<li><a href="../DGD_Terms.html">DGD Glossary</a></li>
<li><a href="../Java_vs_DGD.html">Java vs DGD</a></li>
<li><a href="../Misc_DGD.html">Miscellaneous DGD</a></li>
<li><a href="../MudOS_vs_DGD.html">MudOS vs DGD</a></li>
<li><a href="../MUDs_using_DGD.html">DGD MUDs</a></li>
<li><a href="../SlushBucket.html">Slush Bucket</a></li>
<li><a href="../Why_DGD.html">Why Use DGD?</a></li>
<li><a href="../Config/index.html">Getting DGD</a></li>
<li><a href="../GameDesign/index.html">Game Design Issues</a></li>
<li><a href="index.html">The Kernel Library</a></li>
<ul>
<li><a href="Adding.html">Adding to your MUDLib</a></li>
<li><a href="Auto_API.html">Driver &amp; Auto APIs</a></li>
<li><a href="CaseStudies.html">Security Case Studies</a></li>
<li><a href="Commands.html">Commands in the Kernel</a></li>
<li><a href="Debugging.html">Debugging with the Kernel</a></li>
<li><a href="Directories.html">Directory Structure</a></li>
<li><a href="EmailArchive.html">Email Archive</a></li>
<li><a href="Errord.html">Errord</a></li>
<li><a href="Inheritance.html">Inheritance in the Kernel</a></li>
<li><a href="Layers.html">Layers of DGD</a></li>
<li><a href="Modifying.html">Extending the Kernel</a></li>
<li><a href="ObjectManager.html">Object Manager</a></li>
<li>Object Creators and Owners</li>
<li><a href="Overhead.html">Kernel Overhead</a></li>
<li><a href="ScopeOfLib.html">What Does It Do?</a></li>
<li><a href="SecondAuto.html">Extra AUTO Objects</a></li>
<li><a href="Security.html">Kernel Security</a></li>
<li><a href="Threading.html">Breaking Up Functions</a></li>
<li><a href="UserConnections.html">Users and Connections</a></li>
</ul>
<li><a href="../LibWriting/index.html">Writing a Library</a></li>
<li><a href="../LPC/index.html">Untitled document (LPC/index.base.html)</a></li>
<li><a href="../Operation/index.html">What Does It Do?</a></li>
<li><a href="../Programming/index.html">DGD LPC Reference</a></li>
<li><a href="../Running/index.html">Running a MUD</a></li>
<li><a href="../Skotos/index.html">Skotos</a></li>
</ul>
<li><a href="../../Innsmouth/index.html">Innsmouth MUD</a></li>
<li><a href="../../Operation/index.html">Phantasmal Operation</a></li>
<li><a href="../../Setup/index.html">Setup</a></li>
<li><a href="../../Test/index.html">Test module index</a></li>
<li><a href="../../Tutorial/index.html">Phantasmal Tutorials</a></li>
</ul>
</ul>

      </td>
      <td valign="top" class="content_pane">
        <p><a href="index.html">Phantasmal Site</a> > <a href="index.html">DGD</a> > <a href="index.html">The Kernel Library</a> > Object Creators and Owners</p>



<h1>Object Creators and Owners</h1>

<h3>What is an Object's Creator?</h3>

<p>Finding an object's creator is easy. The object's name will
usually start with /usr/XXX. That XXX is the object's creator as
far as the Kernel MUDLib is concerned.</p>

<h3>Who Owns the Object?</h3>

<p>The Kernel MUDLib occasionally does things with objects
according to who owns them. The owner is, conceptually, the user
who called clone_object() or the equivalent. But it's a little
trickier than that.</p>

<p>Say you've just entered a command which causes an object to be
cloned. You're the current user, but you're using code in (for
instance) /usr/System to run the command. So who owns the new
object, you or System?</p>

<p>Say it's not a clone? Does that make a difference? Yup. If an
object isn't a clone then the creator is also the owner. For
instance, that's true if it's the original compiled clonable
object, or if it's a library.</p>
<pre>
From: dgd at list.imaginary.com (Par Winzell)
Date: Fri Feb 27 13:06:01 2004
Subject: [DGD] Kernel Lib, creator &amp; owner

&gt;&gt;So...are there any instances where the variables owner &amp; creator in the
&gt;&gt;auto.c will actually be different? or the driver's creator() return a
&gt;&gt;differing string? ... and if not why have 2 variables that don't differ?
&gt;&gt;
&gt;&gt;I'm sure I'm missing something, so could anyone enlighten me? :)
&gt;&gt;
&gt; 
&gt; Well I tested some more, logged in as admin.
&gt; copied, blah.c to /usr/zamadhi/obj/blah.c
&gt; compiled it, cloned it.
&gt; The master object winds up with zamadhi as creator &amp; owner.
&gt; And the clone winds up with "admin" as owner, and zamadhi as query_creator()

You can easily scan through auto.c for all instances of owner and 
creator being assigned anything. It all happens in _F_create and the 
logic is quite straight-forward:

   * The creator is purely a function of the object's name...
     * An object /usr/Foo/* has creator Foo
     * An object /kernel/* has creator System
       * (i.e. /kernel and /usr/System have some equivalences)
     * Anything else has creator nil

   * The owner is identical to the creator for master objects (anything 
that is neither clone nor pure program). For clones it is set to the 
owner of the cloning object, unless the second argument to 
clone_object() and new_object() is used by the mudlib layer to force a 
certain owner for an object. This is how a wiztool that lives in /kernel 
can give a newly cloned object e.g. the owner 'zell'.

The clone_object() and new_object() functions pass on this 'uid to be' 
through a TLS value (thread local storage).

Zell
</pre>

      </td>
    </tr>
  </table>

  <div class="footer_pane">
    <p>Copyright (C) 2010 Raymond Jennings</p>

<p>This website is released to the public under the terms of the
GNU Free Documentation License, Version 1.3 or later</p>

  </div>
</body>
</html>
