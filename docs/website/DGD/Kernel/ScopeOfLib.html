<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />

  <title>The Phantasmal MUDlib for DGD: What Does It Do?
</title>
  <link href="../../css/default.css" type="text/css" rel="stylesheet" />
</head>

<body>
  <div class="header_pane">
    <p>Phantasmal MUD Lib for DGD</p>

  </div>

  <div class="banner_pane">
    <table class="banner">
  <tr>
    <td class="banner" align="center"><a href=
    "http://validator.w3.org/check/referer"><img src=
    "http://www.w3.org/Icons/valid-xhtml10" alt=
    "Valid XHTML 1.0 Strict!" style=
    "border: 0; width: 88px; height: 31px;"></a> <a href=
    "http://jigsaw.w3.org/css-validator/check/referer"><img src=
    "http://jigsaw.w3.org/css-validator/images/vcss" alt=
    "Valid CSS!" style="border: 0; width: 88px; height: 31px;"></a>
    <a href="http://sourceforge.net"><img src=
    "http://sourceforge.net/sflogo.php?group_id=48659&amp;type=2"
    style="border: 0; width: 125px; height: 37px;" alt=
    "SourceForge.net Logo"></a></td>
  </tr>
</table>

  </div>

  <table>
    <tr>
      <td valign="top" class="index_pane">
        <ul>
<li><a href="../../index.html">Phantasmal Site</a></li>
<ul>
<li><a href="../../History.html">History</a></li>
<li><a href="../../Installing.html">Installing Baseline Phantasmal</a></li>
<li><a href="../../Comparison.html">Comparison to Other Libs</a></li>
<li><a href="../../Credits.html">Credits</a></li>
<li><a href="../../Current.html">Current Features</a></li>
<li><a href="../../WhatIsPhantasmal.html">About</a></li>
<li><a href="../../API/index.html">Phantasmal API</a></li>
<li><a href="../../Archive/index.html">Archive</a></li>
<li><a href="../../Design/index.html">Design</a></li>
<li><a href="../../Development/index.html">Development</a></li>
<li><a href="../index.html">DGD</a></li>
<ul>
<li><a href="../Manual/index.html">DGD Reference Manual</a></li>
<li><a href="../Contribute.html">Contributing to DGD</a></li>
<li><a href="../CSharp_vs_DGD.html">CSharp vs DGD</a></li>
<li><a href="../DGD_Terms.html">DGD Glossary</a></li>
<li><a href="../Java_vs_DGD.html">Java vs DGD</a></li>
<li><a href="../Misc_DGD.html">Miscellaneous DGD</a></li>
<li><a href="../MudOS_vs_DGD.html">MudOS vs DGD</a></li>
<li><a href="../MUDs_using_DGD.html">DGD MUDs</a></li>
<li><a href="../SlushBucket.html">Slush Bucket</a></li>
<li><a href="../Why_DGD.html">Why Use DGD?</a></li>
<li><a href="../Config/index.html">Getting DGD</a></li>
<li><a href="../GameDesign/index.html">Game Design Issues</a></li>
<li><a href="index.html">The Kernel Library</a></li>
<ul>
<li><a href="Adding.html">Adding to your MUDLib</a></li>
<li><a href="Auto_API.html">Driver &amp; Auto APIs</a></li>
<li><a href="CaseStudies.html">Security Case Studies</a></li>
<li><a href="Commands.html">Commands in the Kernel</a></li>
<li><a href="Debugging.html">Debugging with the Kernel</a></li>
<li><a href="Directories.html">Directory Structure</a></li>
<li><a href="EmailArchive.html">Email Archive</a></li>
<li><a href="Errord.html">Errord</a></li>
<li><a href="Inheritance.html">Inheritance in the Kernel</a></li>
<li><a href="Layers.html">Layers of DGD</a></li>
<li><a href="Modifying.html">Extending the Kernel</a></li>
<li><a href="ObjectManager.html">Object Manager</a></li>
<li><a href="ObjectOwners.html">Object Creators and Owners</a></li>
<li><a href="Overhead.html">Kernel Overhead</a></li>
<li>What Does It Do?</li>
<li><a href="SecondAuto.html">Extra AUTO Objects</a></li>
<li><a href="Security.html">Kernel Security</a></li>
<li><a href="Threading.html">Breaking Up Functions</a></li>
<li><a href="UserConnections.html">Users and Connections</a></li>
</ul>
<li><a href="../LibWriting/index.html">Writing a Library</a></li>
<li><a href="../LPC/index.html">Untitled document (LPC/index.base.html)</a></li>
<li><a href="../Operation/index.html">What Does It Do?</a></li>
<li><a href="../Programming/index.html">DGD LPC Reference</a></li>
<li><a href="../Running/index.html">Running a MUD</a></li>
<li><a href="../Skotos/index.html">Skotos</a></li>
</ul>
<li><a href="../../Innsmouth/index.html">Innsmouth MUD</a></li>
<li><a href="../../Operation/index.html">Phantasmal Operation</a></li>
<li><a href="../../Setup/index.html">Setup</a></li>
<li><a href="../../Test/index.html">Test module index</a></li>
<li><a href="../../Tutorial/index.html">Phantasmal Tutorials</a></li>
</ul>
</ul>

      </td>
      <td valign="top" class="content_pane">
        <p><a href="index.html">Phantasmal Site</a> > <a href="index.html">DGD</a> > <a href="index.html">The Kernel Library</a> > What Does It Do?</p>



<h2>What Does the Kernel Library Actually Do?</h2>

<p>DGD is able to fully recompile all code in place, if you meet
certain restrictions. The Kernel Library, used properly, makes sure
that you obey those restrictions. There's no way to violate them,
in fact, if you don't modify anything under &frasl;kernel, because
the Kernel Library simply won't allow you to. So the Kernel Library
helps make sure that all your code can be upgraded instantly and
in-place.</p>

<p>The Kernel Library also provides security. If you've got code
and data files in your directories, you'd like it if other
administrators and builders can't change them, and for some of the
files, you don't want other admins (or their objects and programs)
to be able to read them. The Kernel Library prevents that, not only
for your files but also for your compiled programs running in
memory. That means you don't need to worry as much about trusting
other administrators in the game, since they can't mess up your
stuff.</p>

<p>The Kernel Library also provides certain kinds of object
management support and user management support. You can register an
object manager with the library, and the Kernel Library will call
hook functions in your object manager whenever files are compiled,
inherited or included so that you can do the rest of the work
necessary to upgrade every object in place (you can also use
somebody else's object manager, but it still needs the Kernel
Library). The Kernel Library will keep track of user connections
and disconnections, and provide you with a nice interface to it.
There are similar facilities to track errors, and cause all
programs to implicitly inherit an AUTO-type object of your
choice.</p>

<p>The Kernel Library will also keep track of resource usage for
every administrator in the game. The amount of memory space and
processor time and the number of DGD objects are tracked
automatically, as are several more obscure commodities. It's easy
to add more resource tracking for things like in-game money or
power of monsters to keep your administrators and their areas from
spawning too much of a good thing.</p>

<p>There are some additional functions defined by the Kernel
Library for creating signals which an object can send and other
objects can subscribe to. That allows for various events occurring,
and provides an infrastructure to make it happen in code.</p>
<pre>
From: dgd at list.imaginary.com (Par Winzell)
Date: Mon Sep 17 12:39:01 2001
Subject: [DGD] Could it work...

&gt;&gt;I'm sure I've missed loads but I wasn't entirely sure why the kernel lib was
&gt;&gt;so important to use. The above does seem tricky but doesn't sound
&gt;&gt;impossible. With looking at the kernel I'm sure we can work it out seeing as
&gt;&gt;that's how we've coded the connection stuff etc. so far.
&gt;&gt;Or am I being dim?
&gt;&gt;
&gt; I think the point people are trying to make is that very careful thought
&gt; has gone into making the kernel lib, and by using the kernel lib, you are
&gt; saved from doing a lot of trial-and-error attempts at your own 'kernel
&gt; lib'.  Especially if one is not terribly interested in the knitty-gritty
&gt; details, that's where I'd assume the kernel lib helps; at least that's the
&gt; point I think Par was 


That's pretty much it. You have to ask yourself, how much of what the 
kernel library gives me do I need? And if that amount is large enough, 
then you need to question if it is realistic to believe you can -save- 
effort by -not- using it.

If you are going for a truly persistent Mud, i.e. you plan on rebooting 
only from state dumps once your Mud is up and running, then you -have- 
to either use the kernel library, or reimplement much of what it does. 
That is a non-trivial undertaking, to say the least.

Going persistent is a big deal. When you're persistent, you realize, you 
will never again cold-start your game. You never again get to feel like 
you're cleaning away all the old cobwebs. If you clone an object and you 
lose track of the clone, it's going to stay with you for eternity. If 
you compile a program and forget where it is, it'll stay compiled and 
forgotten forever. Crap builds up. If you make a terrible error a year 
into your Mud's uptime, an error that causes you not to be able to log 
in, you're screwed -- you have to go back to a saved statedump from a 
few days earlier, or if you didn't save any, lose all your state.

If Matt wants to avoid all this complexity, he should not try for the 
persistence right now. It cannot be overstated what a difference this 
makes. Save inventories and vital player data to file, perhaps using the 
trusy old save_object() and restore_object(). Worry about persistence in 
a few years. You really don't want to go for persistence as your first 
project.

Zell
</pre>
<hr>
<pre>
Date: Mon Sep 17 12:51:00 2001
Subject: [DGD] Could it work...

Matt,

&gt; To be honest we looked at the kernel lib and had no idea what was going on
&gt; ;) So with a lot of work and head banging we built our own system from the
&gt; ground up. The great thing about that is that I know what every little bit
&gt; of code does. I was unsure about working with something I couldn't
&gt; understand. Maybe now we can look back and say ... 'oops' but I think it's
&gt; okay...


The kernel library is not particularly friendly, true, and I completely 
agree that it is good to learn why you need something before you start 
using it. To limit the amount of "oops" that happens, seriously consider 
my suggestion not to start off with a persistent Mud. Then over time as 
you run the Mud, take note of how often you need to cold-start it and 
consider what would happen if you couldn't do that, ever. That'll give 
you a first appreciation of what need the kernel library attempts to fill.

Zell
</pre>
<hr>
<pre>
Date: Tue Sep 18 19:25:01 2001
Subject: [DGD] Could it work...

On Wed, Sep 19, 2001 at 12:22:35AM +0100, mtaylor wrote:
&gt; Me again I'm afraid,
&gt; 
&gt; My coding partner thinks that we can use what we need of the kernel lib to
&gt; develop our own system. The good thing for us about doing that is that we
&gt; will then understand what is going on.
&gt; 
&gt; Does anyone have the time (and/or patience) to list what it is the kernel
&gt; lib does and very briefly how and why it does it.

Disclaimer: I doubt this list is complete.

The kernel-lib...

- provides the basic ability to add users, grant users access, grant
  users limited quota of objects, stack/ticks/callout-usage, to avoid
  someone going ahead and creating 60000 clones of some object and
  thereby taking the game down.

- provides the ability for external objects to 'hook' themselves into
  the /kernel/sys/driver.c object (and one or two other /kernel
  objects) so that you will be notified if an object is compiled,
  cloned, destructed, freed, inherited, a file #include'd, etc.

  This is where you would hook up an 'Object DB' that keeps track of
  the inheritance information so that you can write your own 'upgrade'
  command that recompiles whatever is necessary.  This is one of the
  things that is _not_ provided by the kernel-lib. :)

- provides a basic wiztool (with a very nice 'store results for reuse'
  approach).

- enforces that inheritables, clonables and 'other' code are in
  separate directories, 'lib/' subdirs for inherities, 'obj/' subdirs
  for clonables and, more recently, 'data/' subdirs for LWOs.

I'm sure there are other useful things but these are just some that
come to mind right now.

Hope this helps,

Erwin.
-- 
Erwin Harte
</pre>

      </td>
    </tr>
  </table>

  <div class="footer_pane">
    <p>Copyright (C) 2010 Raymond Jennings</p>

<p>This website is released to the public under the terms of the
GNU Free Documentation License, Version 1.3 or later</p>

  </div>
</body>
</html>
